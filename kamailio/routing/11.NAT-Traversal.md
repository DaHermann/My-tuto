# NAT Traversal

## NAT OVERVIEW (VUE D'ENSEMBLE DU NAT)


La traduction d'adresse réseau (NAT) est le mécanisme par lequel un dispositif de réseau, un routeur ou un pare-feu, agit comme intermédiaire entre deux réseaux, généralement un privé et un public, en redirigeant une ou plusieurs adresses publiques vers différents nœuds du réseau privé.
<img src="">

En pratique, tout paquet provenant d'un appareil du réseau privé est considéré comme provenant du routeur NAT par les appareils du réseau public.
Dans le schéma ci-dessus, le routeur NAT a deux interfaces de réseau :
- une interface externe avec l'IP public 200.0.0.1 pour se connecter à Internet
- interface interne avec l'IP privé 10.0.0.1 pour se connecter au réseau privé
Les plages d'adresses IP pouvant être utilisées pour les réseaux privés sont définies par la RFC1918. Ces plages sont les suivantes : 

* **10.0.0.0 - 10.255.255.255** (network mask 10/8)
* **172.16.0.0 - 72.31.255.255** (network mask 172.16/12)
* **192.168.0.0 - 192.168.255.255** (network mask 192.168/16)

Le NAT est défini pour les réseaux IPv4 uniquement et il est censé ne pas être utilisé dans les réseaux IPv6.
Mais beaucoup utilisent le NAT comme un mécanisme de sécurité, non pas à cause de la pénurie d'adresses IPv4, donc
nous pouvons voir des topologies de réseau similaires à la NAT dans IPv6, heureusement IPv6 a suffisamment d'adresses pour ne pas être aussi complexe que dans IPv4.

### TYPES OF NAT (TYPES DE NATURE)


Les routeurs NAT peuvent avoir différentes politiques pour faire correspondre les adresses privées aux adresses publiques, en étant classés par catégories :
- **full cone NAT (NAT à cône complet)** - il s'agit d'une mise en correspondance biunivoque entre l'adresse IP publique et un port du routeur NAT et une adresse IP privée et un port d'un appareil du réseau privé. Il permet les connexions entrantes à partir de dispositifs externes, ce qui constitue le type de NAT le moins restrictif, connu également sous le nom de "port forwarding".
- **restricted cone NAT (NAT à cône restreint)** - il est similaire au NAT à cône complet, mais il exige que le dispositif à l'intérieur du réseau privé initie la communication. Par conséquent, aucun appareil du réseau public ne peut envoyer de paquets à un appareil situé derrière le routeur NAT avant d'en recevoir un.
- **port restricted NAT (NAT à port restreint)** - cela ajoute une restriction sur le port source des paquets provenant d'appareils externes. Si le dispositif du réseau privé envoie les paquets à un port spécifique d'un dispositif du réseau public, ce dispositif doit utiliser le même port pour renvoyer le trafic.
- **symmetric NAT (NAT symétrique)** - il s'agit du type de NAT le plus restrictif, qui applique des restrictions sur l'IP et le port des deux appareils des deux côtés. L'attribution des ports sur l'interface publique du routeur NAT se fait de manière aléatoire et généralement pour une durée limitée, la cartographie de traduction étant détruite au bout d'un certain temps s'il n'y a pas de trafic en provenance de l'appareil dans le réseau privé. Les ports alloués sont différents même lorsque le dispositif du réseau privé utilise la même IP et le même port mais envoie vers des dispositifs ou des ports différents dans le réseau public.









